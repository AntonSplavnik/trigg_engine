# RGB565 Color Format

## What is RGB565?

RGB565 is the color format used by the ST7735 display:
- **16-bit color format** (2 bytes per pixel)
- **5 bits RED, 6 bits GREEN, 5 bits BLUE**
- **65,536 possible colors**

**Bit layout:**
```
15 14 13 12 11 | 10 9 8 7 6 5 | 4 3 2 1 0
R  R  R  R  R  | G  G G G G G | B B B B B
```

---

## Why 6 Bits for Green?

- Human eyes are most sensitive to green light
- Extra green bit gives better perceived color quality
- More noticeable improvement than adding to red or blue

---

## Memory Usage

**Framebuffer size:**
- 128×160 display = 20,480 pixels
- 20,480 × 2 bytes = **40,960 bytes (40KB framebuffer)**

**This is mandatory for the 40KB framebuffer mentioned in CLAUDE.md**

---

## Common Colors

```cpp
Red:    0xF800  // (11111 000000 00000)
Green:  0x07E0  // (00000 111111 00000)
Blue:   0x001F  // (00000 000000 11111)
White:  0xFFFF  // (11111 111111 11111)
Black:  0x0000  // (00000 000000 00000)
Yellow: 0xFFE0  // (11111 111111 00000)
Cyan:   0x07FF  // (00000 111111 11111)
Magenta:0xF81F  // (11111 000000 11111)
```

---

## Alternative Formats (Not Recommended)

The ST7735 controller supports other formats via the COLMOD command (0x3A):

| Format     | Bits per Pixel | Colors  | Framebuffer Size | Recommendation |
|------------|----------------|---------|------------------|-----------------------|
| **RGB444** | 12-bit         | 4,096   | 30KB             | ❌ Poor quality       |
| **RGB565** | 16-bit         | 65,536  | 40KB             | ✅ **Best choice**    |
| **RGB666** | 18-bit         | 262,144 | 60KB             | ❌ Too much RAM       |

**Why RGB565 is optimal:**
- Good color depth (65K colors sufficient for pixel art)
- Reasonable memory usage (40KB = 15% of 264KB RAM)
- Fast to transfer over SPI
- Perfect for 60 FPS target

---

## Converting RGB888 to RGB565

If you have colors in standard RGB format (0-255 per channel):

```cpp
// RGB888: r=255, g=128, b=64
// Convert to RGB565:
uint16_t color = ((r & 0xF8) << 8) |   // Red: 5 bits
                 ((g & 0xFC) << 3) |   // Green: 6 bits
                 ((b & 0xF8) >> 3);    // Blue: 5 bits

// Result: 0xFC47
```

**Explanation:**
- `r & 0xF8` keeps top 5 bits of red (11111000)
- `g & 0xFC` keeps top 6 bits of green (11111100)
- `b & 0xF8` keeps top 5 bits of blue (11111000)
- Shift to correct positions in 16-bit value
